package com.demo.servlet;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class MsebBillCalc extends HttpServlet {

	double rate1, rate2, rate3;
	
	public void init(ServletConfig config) throws ServletException{
		System.out.println("in init method");
		double rate1 = Double.parseDouble(config.getInitParameter("rate1"));
		double rate2 = Double.parseDouble(config.getInitParameter("rate2"));
		double rate3 = Double.parseDouble(config.getInitParameter("rate3"));
	}
	
	public void doGet(HttpServletRequest req, HttpServletResponse res) throws IOException {
		
		res.setContentType("text/html");
		PrintWriter out = res.getWriter();
		
		double units = Double.parseDouble(req.getParameter("units"));
		double bamount = 0;
		if(units > 100) {
			bamount = 100*rate1;
		}
		else {
			bamount = units*rate1;
		}
		if(units > 101) {
			double remunits = units-100;
			if(remunits > 50) {
				bamount = bamount+(500*rate2)+(remunits-100)*rate3;
			}else {
				bamount = bamount+(remunits*rate2);
			}

		}
		
		out.println("bill amonut:"+ bamount);
			}
	
	public void destroy() {
		System.out.println("in destroy method");
	}
}
