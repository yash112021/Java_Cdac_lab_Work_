package com.demo.test;

import java.util.List;
import java.util.Scanner;

import com.demo.beans.Employee;
import com.demo.service.EmployeeService;
import com.demo.service.EmployeeServiceImpl;
import com.demo.service.ProjectService;
import com.demo.service.ProjectServiceImpl;

public class TestEmpProjCrud {

	public static void main(String[] args) {
		// here creating the object of the service one of both the employee and the project
		ProjectService pservice = new  ProjectServiceImpl();
		EmployeeService eservice=new EmployeeServiceImpl();
		
		Scanner sc = new Scanner(System.in);
		

		int choice =0;
		do {
			
			
			System.out.println("1.Add Project");
			System.out.println("2.Add Employees");
			System.out.println("3.Show all employeest");
			System.out.println("4.delete employee");
			System.out.println("5.update employe sal");
			System.out.println("6.Add extra employees");
			System.out.println("7.exit\n choice");
			choice = sc.nextInt();
			
			switch(choice) {
			case 1 -> {
				// now here we are adding the project to the we take this till dao
				boolean status =pservice.addProject(); // return us the status
				if(status) {
					System.out.println("Project Added Succesfuuly");
				}else {
					System.out.println("project not added some erroe occred");
				}
			}
			case 2-> {
				boolean status = eservice.addEmployee();
				//Adding employee
				if(status) {
					System.out.println("Employee Added Succesfuuly");
				}else {
					System.out.println("Employee not added");
				}
			}
			
			case 3->{
				//finding all the employees
				List<Employee> elist = eservice.getAllEmployee();
				elist.stream().forEach(System.out::println);
			}
			
			case 4 ->{
				//delete by id
				System.out.println("Enter the id");
				int id = sc.nextInt();
				boolean status = eservice.deleteById(id);
				
				if(status) {
					System.out.println("Employee deleted successfully");
				}
				else {
					System.out.println("employee not deleted");
				}
			}
			
			
			case 5->{
				//update sal and name by id
				System.out.println("enter employee id");
				int eid = sc.nextInt();
				System.out.println("enter employee name");
				String ename = sc.next();
				System.out.println("enter employee sal");
				double sal= sc.nextDouble();
				
				boolean status = eservice.updateSalNameById(eid,ename,sal);
				if(status) {
					System.out.println("Employee updated successfully");
				}
				else {
					System.out.println("employee does not exists ");
				}
			}
			
			case 6->{
				//assigning the extra project to the employee
				System.out.println("Enter the employee id");
				int eid = sc.nextInt();
				System.out.println("Enter the project id");
				int pid = sc.nextInt();
				
				boolean status = eservice.addExtraProjToEmply(eid,pid);
				if(status) {
					System.out.println("project successfully assigned to the existing employee");
				}
				else {
					System.out.println("employee does not exists ");
				}
			}
			
			case 7->{
				// performing the sort on The Emplyee table as per the  salary 
				//return us the list
				List<Employee>lst=eservice.sortEmpBySal();
				lst.stream().forEach(System.out::println());
			}
			
			}
			
		}while(choice !=6);
	}

}
